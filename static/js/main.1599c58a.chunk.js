(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{30:function(e,t,c){},33:function(e,t,c){},57:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c.n(n),o=c(8),r=c.n(o),a=(c(30),c(31),c(32),c.p,c(33),c(6)),i=c(17),l=c(15),u=c.n(l),j=(c(56),c(5)),h=c.n(j),d=c(7),b=c(9),f=c(3),m="https://geolocation-db.com/json/",O=s.a.createContext(),p=function(e){var t=e.children,c=Object(n.useState)(null),s=Object(a.a)(c,2),o=s[0],r=s[1],i=Object(n.useState)(!1),l=Object(a.a)(i,2),u=l[0],j=l[1],p=Object(n.useState)({}),x=Object(a.a)(p,2),g=x[0],y=x[1],v=Object(n.useState)(null),C=Object(a.a)(v,2),w=C[0],_=C[1],k=Object(n.useState)(null),N=Object(a.a)(k,2),S=N[0],z=N[1],E=Object(n.useState)(null),I=Object(a.a)(E,2),W=I[0],D=I[1],M=Object(n.useState)(null),T=Object(a.a)(M,2),A=T[0],G=T[1],H=Object(n.useState)(!1),F=Object(a.a)(H,2),L=F[0],P=F[1],R=function(){var e=Object(b.a)(h.a.mark((function e(){var t,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(m);case 2:return t=e.sent,e.next=5,t.json();case 5:c=e.sent,y(Object(d.a)(Object(d.a)({},g),{},{city:c.city,lat:c.latitude,lon:c.longitude,country:c.country_code})),console.log("Geo :",c);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)(Object(b.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:R();case 1:case"end":return e.stop()}}),e)}))),[m]),Object(n.useEffect)((function(){j(!0),g.lat&&fetch("https://maps.googleapis.com/maps/api/timezone/json?location=".concat(g.lat,",").concat(g.lon,"&timestamp=").concat(Math.floor(Date.now()/1e3),"&key=AIzaSyChD_ozQm2jhcWsqNgX3iSW1kMZjdGIbx4")).then((function(e){return e.json()})).then((function(e){console.log("Timezone :",e),_(e.timeZoneId)})),g.lat&&fetch("".concat("https://api.openweathermap.org/data/2.5/weather?lat=").concat(g.lat,"&lon=").concat(g.lon,"&appid=").concat("706c875644ce262a11af9eaf5a62df90","&units=metric")).then((function(e){return e.json()})).then((function(e){console.log("Weather :",e);var t=e.dt,c=e.weather,n=e.main,s=n.temp,o=n.feels_like,r=n.temp_min,a=n.temp_max,i=n.pressure,l=n.humidity,u=e.wind.speed,j=e.clouds.all,h=e.sys,d=h.country,b=h.sunrise,f=h.sunset,m=e.id;z({dt:t,weatherc:c[0],temp:s,feels_like:o,temp_min:r,temp_max:a,pressure:i,humidity:l,wind:u,clouds:j,country:d,sunrise:b,sunset:f,id:m})})).catch((function(e){console.error(e)})),j(!1)}),[g]),console.log(S&&S),console.log(w),Object(n.useEffect)((function(){r(S&&S.weatherc.icon.slice(-1))}),[S]),console.log("Theme:",o),Object(n.useEffect)((function(){g.country&&fetch("".concat("https://newsapi.org/v2/top-headlines?country=").concat(g.country,"&apiKey=").concat("07a79a233918493ea5e2dc75ebbf7f3a")).then((function(e){return e.json()})).then((function(e){console.log("News :",e),D(e.articles)})).catch((function(e){console.error(e)}))}),[g]),Object(n.useEffect)((function(){fetch("https://coronavirus-monitor-v2.p.rapidapi.com/coronavirus/cases_by_country.php",{method:"GET",headers:{"x-rapidapi-host":"coronavirus-monitor-v2.p.rapidapi.com","x-rapidapi-key":"b74faec440mshb8fdb8ea26ffea9p1aaf6bjsn50000fc429ce"}}).then((function(e){return e.json()})).then((function(e){console.log("Covid :",e);var t=e.statistic_taken_at,c=e.countries_stat;G({countries:c.map((function(e){return{name:e.country_name,cases:e.cases,deaths:e.deaths,new_cases:e.new_cases,new_deaths:e.new_deaths,active_cases:e.active_cases}})),sources:t.split(" ")[0]})})).catch((function(e){console.error(e)}))}),[]),console.log(A);return Object(f.jsx)(O.Provider,{value:{theme:o,loading:u,location:g,fetchLocation:R,getCoords:function(e){fetch("https://maps.googleapis.com/maps/api/geocode/json?address=".concat(e,"&key=AIzaSyChD_ozQm2jhcWsqNgX3iSW1kMZjdGIbx4\n")).then((function(e){return e.json()})).then((function(e){console.log("Coords :",e),e.results[0].address_components.some((function(e){return e.types.includes("locality")}))?y(Object(d.a)(Object(d.a)({},g),{},{city:e.results[0].address_components.filter((function(e){return e.types.includes("locality")}))[0].long_name,lat:e.results[0].geometry.location.lat,lon:e.results[0].geometry.location.lng,country:e.results[0].address_components.filter((function(e){return e.types.includes("country")}))[0].short_name})):(P(!0),console.log("error: ",L))})).catch((function(e){console.error(e)}))},weather:S,timezone:w,news:W,covid:A},children:t})},x=c(20),g=function(){var e=Object(n.useRef)(),t=Object(n.useContext)(O),c=(t.theme,t.isLoading,t.location),s=t.getCoords,o=Object(n.useState)(""),r=Object(a.a)(o,2),i=r[0],l=r[1];return Object(n.useEffect)((function(){return console.log("places",e),console.log(c),l(c.city),function(){l("")}}),[c]),Object(f.jsx)("div",{className:"search",children:Object(f.jsx)(x.a,{ref:e,apiKey:"AIzaSyChD_ozQm2jhcWsqNgX3iSW1kMZjdGIbx4",selectProps:{defaultInputValue:i,onChange:function(e){console.log(e),l(e.value.structured_formatting.main_text),s(e.value.description),console.log(c)}}})})},y=c(16),v=c.n(y),C=function(e){var t="Card "+e.className;return Object(f.jsx)("div",{className:t,children:e.children})},w=function(){var e=Object(n.useContext)(O),t=e.theme,c=e.weather,s=e.location,o=e.timezone;return c&&Object(f.jsxs)(C,{className:t+" weather",children:[Object(f.jsxs)("div",{children:[Object(f.jsxs)("h1",{children:[s.city,", ",s.country]}),Object(f.jsx)(v.a,{format:"DD MMMM YYYY",ticking:!0,timezone:o})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)(v.a,{format:"HH:mm:ss",ticking:!0,timezone:o}),Object(f.jsxs)("p",{children:[c.temp,", ",c.country]})]})]})},_=function(e){var t=e.item;return Object(f.jsxs)("a",{className:"news-item",href:t.url,target:"_blank",children:[Object(f.jsx)("img",{src:t.urlToImage,alt:"No Image"}),Object(f.jsx)("p",{children:t.title})]})},k=function(){var e=Object(n.useContext)(O),t=e.theme,c=e.news;return Object(f.jsxs)(C,{className:t+" news",children:[Object(f.jsx)("h1",{children:"Current News"}),Object(f.jsx)("div",{children:c&&c.map((function(e,t){return Object(f.jsx)(_,{item:e},t)}))})]})},N=c(62),S=function(){var e=Object(n.useContext)(O),t=e.covid,c=e.theme;return Object(f.jsxs)(C,{className:c+" covid",children:[Object(f.jsx)("h1",{style:{position:"sticky"},children:"Covid Cases by Country"}),Object(f.jsxs)(N.a,{className:"table",size:"sm",variant:"dark",striped:!0,hover:!0,responsive:!0,children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"#"}),Object(f.jsx)("th",{children:"Country"}),Object(f.jsx)("th",{children:"Cases"}),Object(f.jsx)("th",{children:"Active"}),Object(f.jsx)("th",{children:"Deaths"}),Object(f.jsx)("th",{children:"New Cases"}),Object(f.jsx)("th",{children:"New Deaths"})]})}),Object(f.jsx)("tbody",{children:t&&t.countries.map((function(e,t){return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:t+1}),Object(f.jsx)("td",{children:e.name}),Object(f.jsx)("td",{children:e.cases}),Object(f.jsx)("td",{children:e.active_cases}),Object(f.jsx)("td",{children:e.deaths}),Object(f.jsx)("td",{children:e.new_cases}),Object(f.jsx)("td",{children:e.new_deaths})]},t)}))})]}),t&&Object(f.jsxs)("p",{children:["Source: as of ",t.sources]})]})},z=c.p+"static/media/globe.e40c5193.png",E=function(e){var t=Object(n.useRef)(null),c=Object(n.useState)(0),s=Object(a.a)(c,2),o=s[0],r=s[1],l=Object(n.useContext)(O).theme;return Object(n.useEffect)((function(){return console.log(l),"d"===l?r(u()({el:t.current,THREE:i,mouseControls:!0,touchControls:!0,gyroControls:!1,minHeight:600,minWidth:200,backgroundColor:0})):"n"===l&&r(u()({el:t.current,THREE:i,mouseControls:!0,touchControls:!0,gyroControls:!1,minHeight:600,minWidth:200,skyColor:131596,cloudColor:6978715,cloudShadowColor:528667,sunColor:16448250,sunGlareColor:16777215,sunlightColor:16119285})),function(){o&&o.destroy()}}),[l]),Object(f.jsxs)("div",{ref:t,className:"header",children:[Object(f.jsxs)("div",{className:"logo",children:[Object(f.jsx)("img",{src:z,alt:""}),Object(f.jsx)("h2",{children:"Weather App"})]}),Object(f.jsx)(g,{}),Object(f.jsx)(w,{}),Object(f.jsx)(k,{}),Object(f.jsx)(S,{})]})},I=function(){return Object(f.jsx)("div",{className:"footer",children:"Footer"})};var W=function(){return Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(E,{}),Object(f.jsx)(I,{})]})},D=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,63)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,o=t.getLCP,r=t.getTTFB;c(e),n(e),s(e),o(e),r(e)}))};r.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(p,{children:Object(f.jsx)(W,{})})}),document.getElementById("root")),D()}},[[57,1,2]]]);
//# sourceMappingURL=main.1599c58a.chunk.js.map