(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{30:function(e,t,n){},33:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n.n(c),s=n(9),i=n.n(s),r=(n(30),n(31),n(32),n.p,n(33),n(5)),a=n(18),l=n(15),u=n.n(l),j=n(8),d=n(3),h="AIzaSyAobzmD0pf_jnvXCycI0bUYsBRJlL4ZEvw",m=o.a.createContext(),b=function(e){var t=e.children,n=Object(c.useState)(null),o=Object(r.a)(n,2),s=o[0],i=o[1],a=Object(c.useState)(!1),l=Object(r.a)(a,2),u=l[0],b=l[1],f=Object(c.useState)({}),O=Object(r.a)(f,2),g=O[0],p=O[1],x=Object(c.useState)(null),y=Object(r.a)(x,2),v=y[0],w=y[1],C=Object(c.useState)(null),_=Object(r.a)(C,2),k=_[0],N=_[1],S=Object(c.useState)(null),F=Object(r.a)(S,2),I=F[0],E=F[1],z=Object(c.useState)(!1),H=Object(r.a)(z,2),D=H[0],P=H[1],R=function(){navigator.geolocation&&(console.log("navigator.geolocation is available"),navigator.geolocation.getCurrentPosition((function(e){console.log("current position acquired");var t=e.coords.latitude,n=e.coords.longitude;console.log(t,n),fetch("https://fcc-weather-api.glitch.me/api/current?lon=".concat(n,"&lat=").concat(t)).then((function(e){return e.json()})).then((function(e){return p({lat:t,lon:n,city:e.name,country:e.sys.country})}))}),(function(e){console.warn("ERROR(".concat(e.code,"): ").concat(e.message))})))};Object(c.useEffect)((function(){R()}),[]);return Object(c.useEffect)((function(){b(!0),g.lat&&fetch("https://maps.googleapis.com/maps/api/timezone/json?location=".concat(g.lat,",").concat(g.lon,"&timestamp=").concat(Math.floor(Date.now()/1e3),"&key=").concat(h)).then((function(e){return e.json()})).then((function(e){console.log("Timezone :",e),w(e.timeZoneId)})),g.lat&&fetch("".concat("https://api.openweathermap.org/data/2.5/weather?lat=").concat(g.lat,"&lon=").concat(g.lon,"&appid=").concat("706c875644ce262a11af9eaf5a62df90","&units=metric")).then((function(e){return e.json()})).then((function(e){console.log("Weather :",e);var t=e.dt,n=e.weather,c=e.main,o=c.temp,s=c.feels_like,i=c.temp_min,r=c.temp_max,a=c.pressure,l=c.humidity,u=e.wind.speed,j=e.clouds.all,d=e.sys,h=d.country,m=d.sunrise,b=d.sunset,f=e.id;N({dt:t,weatherc:n[0],temp:o,feels_like:s,temp_min:i,temp_max:r,pressure:a,humidity:l,wind:u,clouds:j,country:h,sunrise:m,sunset:b,id:f})})).catch((function(e){console.error(e)})),b(!1)}),[g]),console.log(k&&k),console.log(v),Object(c.useEffect)((function(){i(k&&k.weatherc.icon.slice(-1))}),[k]),Object(c.useEffect)((function(){g.country&&fetch("".concat("https://api.currentsapi.services/v1/search?language=en&country=").concat(g.country,"&apiKey=").concat("oa9AFhpH80Xey9PNXgPTwZWkQUfBP4yY5iaHKaD6klhgkK9_")).then((function(e){return e.json()})).then((function(e){console.log("News :",e),E(e.news.filter((function(e){return"en"===e.language&&"zh-hant"!==e.language&&"None"!==e.image&&""!==e.author})))})).catch((function(e){console.error(e)}))}),[g]),Object(d.jsx)(m.Provider,{value:{theme:s,loading:u,location:g,fetchLocation:R,getCoords:function(e){fetch("https://maps.googleapis.com/maps/api/geocode/json?address=".concat(e,"&key=").concat(h,"\n  ")).then((function(e){return e.json()})).then((function(e){console.log("Coords :",e),e.results[0].address_components.some((function(e){return e.types.includes("locality")}))?p(Object(j.a)(Object(j.a)({},g),{},{city:e.results[0].address_components.filter((function(e){return e.types.includes("locality")}))[0].long_name,lat:e.results[0].geometry.location.lat,lon:e.results[0].geometry.location.lng,country:e.results[0].address_components.filter((function(e){return e.types.includes("country")}))[0].short_name})):(P(!0),console.log("error: ",D))})).catch((function(e){console.error(e)}))},weather:k,timezone:v,news:I},children:t})},f=n(21),O=function(){var e=Object(c.useRef)(),t=Object(c.useContext)(m),n=t.location,o=t.getCoords,s=Object(c.useState)(""),i=Object(r.a)(s,2),a=i[0],l=i[1];return Object(c.useEffect)((function(){return console.log("places",e),console.log(n),l(n.city),function(){l("")}}),[n]),Object(d.jsx)("div",{className:"search",children:Object(d.jsx)(f.a,{ref:e,apiKey:"AIzaSyChD_ozQm2jhcWsqNgX3iSW1kMZjdGIbx4",selectProps:{defaultInputValue:a,placeholder:"City",onChange:function(e){console.log(e),l(e.value.structured_formatting.main_text),o(e.value.description),console.log(n),console.log("getCoords: ",e.value.description)}}})})},g=n(16),p=n.n(g),x=function(e){var t="Card "+e.className;return Object(d.jsx)("div",{className:t,children:e.children})},y=n(25),v=function(){var e=Object(c.useContext)(m),t=e.theme,n=e.weather,o=e.location,s=e.timezone,i=function(e,t){return new Date(1e3*e).toLocaleString("en-GB",{timeZone:t,hour:"numeric",minute:"numeric"})};return n&&s?Object(d.jsxs)(x,{className:t+" weather",children:[Object(d.jsx)("div",{children:Object(d.jsxs)("h1",{children:[o.city,", ",o.country]})}),Object(d.jsxs)("div",{className:"clocks",children:[Object(d.jsx)(p.a,{format:"DD MMMM YYYY",ticking:!0,timezone:s}),Object(d.jsx)("br",{}),Object(d.jsx)(p.a,{className:"time",format:"HH:mm:ss",ticking:!0,timezone:s})]}),Object(d.jsx)("h3",{children:Object(d.jsx)("i",{children:n.weatherc.main})}),Object(d.jsxs)("div",{children:[Object(d.jsx)("img",{src:"http://openweathermap.org/img/wn/".concat(n.weatherc.icon,"@2x.png"),alt:"image"}),Object(d.jsx)("b",{children:Object(d.jsxs)("i",{children:[parseInt(n.temp).toFixed(1),"\xb0 C\u2003\u2003"]})}),Object(d.jsxs)("i",{children:["feels like ",parseInt(n.feels_like).toFixed(1),"\xb0 C"]}),Object(d.jsxs)("ul",{children:[Object(d.jsx)("li",{children:Object(d.jsxs)("i",{children:[parseInt(n.temp_max).toFixed(1),"\xa0/\xa0",parseInt(n.temp_min).toFixed(1)]})}),Object(d.jsx)("li",{children:Object(d.jsxs)("i",{children:["Sunrise: \xa0",i(n.sunrise,s)]})}),Object(d.jsx)("li",{children:Object(d.jsxs)("i",{children:["Sunset: \xa0",i(n.sunset,s)]})}),Object(d.jsx)("li",{children:Object(d.jsxs)("i",{children:["Wind: \xa0",parseInt(n.wind).toFixed(1)," km/h"]})}),Object(d.jsx)("li",{children:Object(d.jsxs)("i",{children:["Humidity: \xa0",n.humidity," %"]})})]})]})]}):Object(d.jsx)("div",{className:"loader",children:Object(d.jsx)(y.a,{color:"#00BFFF",height:80,width:80})})},w=function(e){var t=e.item;return Object(d.jsxs)("a",{className:"news-item",href:t.url,target:"_blank",children:[Object(d.jsx)("img",{src:t.image,alt:"No Image"}),Object(d.jsx)("p",{children:t.title})]})},C=function(){var e=Object(c.useContext)(m).news;return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"news",children:[Object(d.jsx)("h1",{children:"Current News"}),Object(d.jsx)("div",{className:"news-items",children:e&&e.map((function(e,t){return Object(d.jsx)(w,{item:e},t)}))})]})})},_=n.p+"static/media/globe.e40c5193.png",k=function(e){var t=Object(c.useRef)(null),n=Object(c.useState)(0),o=Object(r.a)(n,2),s=o[0],i=o[1],l=Object(c.useContext)(m).theme;return Object(c.useEffect)((function(){return console.log(l),"d"===l?(s&&s.destroy(),i(u()({el:t.current,THREE:a,mouseControls:!0,touchControls:!0,gyroControls:!1,minHeight:600,minWidth:200,backgroundColor:0}))):"n"===l&&(s&&s.destroy(),i(u()({el:t.current,THREE:a,mouseControls:!0,touchControls:!0,gyroControls:!1,minHeight:600,minWidth:200,skyColor:131596,cloudColor:6978715,cloudShadowColor:528667,sunColor:16448250,sunGlareColor:16777215,sunlightColor:16119285}))),function(){s&&s.destroy()}}),[l]),Object(d.jsxs)("div",{ref:t,className:"header",children:[Object(d.jsxs)("div",{className:"logo",children:[Object(d.jsx)("img",{src:_,alt:""}),Object(d.jsx)("h2",{children:"Weather App"})]}),Object(d.jsx)(O,{}),Object(d.jsx)(v,{}),Object(d.jsx)(C,{})]})},N=o.a.memo(k);function S(){return Object(d.jsx)("div",{className:"App",children:Object(d.jsx)(N,{})})}var F=o.a.memo(S),I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,59)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),c(e),o(e),s(e),i(e)}))};i.a.render(Object(d.jsx)(o.a.StrictMode,{children:Object(d.jsx)(b,{children:Object(d.jsx)(F,{})})}),document.getElementById("root")),I()}},[[58,1,2]]]);
//# sourceMappingURL=main.6a2d8ebd.chunk.js.map